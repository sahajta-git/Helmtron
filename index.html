<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Helmtron — Smart Helmet Safety System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ---------- Global Design ---------- */
body {
  margin:0;
  font-family: Arial, sans-serif;
  background:#0b1a2b;
  color:white;
}
.navbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:15px 30px;
  background:#06121f;
  border-bottom:2px solid #f1c40f;
}
.navbar a{
  color:#f1c40f;
  text-decoration:none;
  margin:0 12px;
  font-size:18px;
  font-weight:bold;
}
.navbar a:hover{
  color:white;
}

/* ---------- Sections ---------- */
section{ display:none; padding:40px; }
#home{ display:block; text-align:center; }

/* ---------- Cards ---------- */
.card{
  background:#132842;
  border:2px solid #f1c40f;
  border-radius:12px;
  padding:20px;
  margin:auto;
  max-width:500px;
  margin-bottom:25px;
  text-align:center;
  box-shadow:0 4px 12px rgba(0,0,0,0.5);
}

/* ---------- Sensor Alerts ---------- */
.safe{ color:#2ecc71; font-weight:bold; }
.danger{ color:#ff4d4d; font-weight:bold; }

/* ---------- Buttons ---------- */
button{
  background:#f1c40f;
  border:none;
  padding:12px 22px;
  border-radius:8px;
  cursor:pointer;
  font-size:16px;
}
button:hover{ background:#ffd835; }
</style>

<script>
// ------- Switch Pages -------
function showPage(id){
  document.querySelectorAll("section").forEach(sec=>sec.style.display="none");
  document.getElementById(id).style.display="block";
}

// ------- ThingSpeak API Keys (CHANGE TO YOURS) -------
const channels = {
  mq135:"https://api.thingspeak.com/channels/3069778/fields/1/last.json",
  vibration:"https://api.thingspeak.com/channels/3069778/fields/2/last.json",
  tilt:"https://api.thingspeak.com/channels/3069778/fields/3/last.json",
  temp:"https://api.thingspeak.com/channels/3069778/fields/4/last.json"
};

// ------- Fetch & Display Sensor Data -------
async function fetchSensor(id,field,label,limit){
  try{
    let r = await fetch(channels[id]);
    let d = await r.json();
    let val = parseFloat(d.field1);
    let status = "SAFE ✅";
    let cls = "safe";

    if(id=="mq135" && val>150){status="Air Danger ⚠"; cls="danger";}
    if(id=="vibration" && val>20){status="Impact Detected ⚠"; cls="danger";}
    if(id=="tilt" && val>30){status="Fall Detected ⚠"; cls="danger";}
    if(id=="temp" && val>45){status="High Temp ⚠"; cls="danger";}

    document.getElementById(field).innerHTML = `${label}: <b>${val}</b>`;
    document.getElementById(limit).innerHTML = `<span class="${cls}">${status}</span>`;
  }catch(e){
    document.getElementById(field).innerHTML = `${label}: Error`;
  }
}
function updateAll(){
  fetchSensor("mq135","mq135_val","Air Quality","mq135_status");
  fetchSensor("vibration","vib_val","Vibration","vib_status");
  fetchSensor("tilt","tilt_val","Tilt","tilt_status");
  fetchSensor("temp","temp_val","Temperature","temp_status");
}
setInterval(updateAll,5000);
window.onload = updateAll;
</script>

</head>
<body>

<!-- ✅ NAVBAR -->
<div class="navbar">
  <div style="font-size:22px;color:white;font-weight:bold;">HELMTRON</div>
  <div>
    <a href="#" onclick="showPage('home')">Home</a>
    <a href="#" onclick="showPage('dashboard')">Live Sensors</a>
    <a href="#" onclick="showPage('history')">Sensor History</a>
    <a href="#" onclick="showPage('about')">About</a>
  </div>
</div>

<!-- ✅ HOME -->
<section id="home">
  <h1>Welcome to Helmtron</h1>
  <p>Smart Helmet safety system to detect accidents, air pollution and temperature danger.</p>
  <button onclick="showPage('dashboard')">View Live Safety Status</button>
</section>

<!-- ✅ LIVE SENSOR DASHBOARD -->
<section id="dashboard">
  <h2>Live Helmet Safety Monitoring</h2>

  <div class="card">
    <h3>MQ-135 Air Quality Sensor</h3>
    <p id="mq135_val">Loading...</p>
    <p id="mq135_status"></p>
  </div>

  <div class="card">
    <h3>Vibration / Impact Sensor</h3>
    <p id="vib_val">Loading...</p>
    <p id="vib_status"></p>
  </div>

  <div class="card">
    <h3>Tilt / Fall Sensor</h3>
    <p id="tilt_val">Loading...</p>
    <p id="tilt_status"></p>
  </div>

  <div class="card">
    <h3>Temperature Sensor</h3>
    <p id="temp_val">Loading...</p>
    <p id="temp_status"></p>
  </div>
</section>

<!-- ✅ SENSOR HISTORY -->
<section id="history" style="text-align:center;">
  <h2>Sensor History</h2>
  <p>Historical records will be displayed here.</p>
  <iframe width="100%" height="350"
    src="https://thingspeak.com/channels/3069778/charts/1"></iframe>
  <br><br>
  <button onclick="showPage('dashboard')">Back to Live Sensors</button>
</section>

<!-- ✅ ABOUT -->
<section id="about">
  <h2>About Helmtron</h2>
  <p>
    Helmtron is a smart IoT helmet that monitors rider safety and environment.
    It detects:
  </p>
  <ul>
    <li>Accident / Impact</li>
    <li>Fall / Tilt</li>
    <li>Air Pollution</li>
    <li>High Temperature</li>
  </ul>
</section>

</body>
</html>
